# CategorAIze

Система персонализированной классификации финансовых трат пользователей с использованием ML.

Документация проекта размещена на [GitHub Pages](https://moneycluster.github.io/CategorAIze/).

## Цель проекта

**Бизнес-цель:** Автоматизировать классификацию пользовательских финансовых трат по персонализированным категориям, сократив время на ручную разметку и повысив точность категоризации.

**Проблема:** Каждый пользователь использует свои категории для учета финансов (например, "Продукты", "Транспорт", "Подписки"). Традиционные подходы с единой глобальной моделью не работают из-за индивидуальности категорий.

**Решение:** Персонализированные ML-модели для каждого пользователя:
- Общая модель эмбеддингов (`sentence-transformers`) для преобразования текстовых описаний трат в векторы
- Персональные легкие классификаторы (например, LogisticRegression или MLP) для каждого пользователя
- Обучение на исторических данных пользователя с возможностью улучшения через обратную связь

## Набор данных

На этапе прототипа данные генерируются синтетически или собираются из публичных датасетов транзакций. Структура данных:

- **Входные данные:** Текстовые описания трат (например, "Обед в кафе", "Такси до работы", "Netflix подписка")
- **Целевая переменная:** Категория траты (определяется пользователем)
- **Дополнительные поля:** Дата, сумма, пользователь ID

## План экспериментов

### Этап 1: Прототип и базовая архитектура
- [x] Определение архитектуры (ADR-001)
- [ ] Реализация Embedding Service на базе `sentence-transformers`
- [ ] Реализация User Classifier Service (LogisticRegression/MLP)
- [ ] Простое хранилище (SQLite)
- [ ] Базовый API (FastAPI)

### Этап 2: Обучение и валидация
- [ ] Генерация/загрузка синтетических данных
- [ ] Предобработка данных (нормализация текста, обработка пропусков)
- [ ] Конфигурационные файлы для обучения
- [ ] Логирование процесса обучения
- [ ] Сохранение модели в формате Hugging Face
- [ ] Базовая валидация (метрики accuracy, precision, recall)

### Этап 3: Тестирование и CI/CD
- [ ] Покрытие тестами предобработки данных
- [ ] Тесты пайплайна обучения
- [ ] Проверки формата данных (типы, диапазоны, обязательные поля)
- [ ] Тесты API (предсказания, обработка ошибок)
- [ ] Настройка GitHub Actions для автоматического запуска тестов
- [ ] Линтеры и форматирование кода (black, ruff, mypy)

## Быстрый старт

Для локальной разработки документации выполните:

```bash
./scripts/serve-docs.sh
```

Скрипт автоматически:
- Соберёт LikeC4 диаграммы (если установлен Node.js)
- Установит зависимости MkDocs (если нужно)
- Запустит локальный сервер на http://127.0.0.1:8000

## Структура проекта

```
CategorAIze/
├── docs/                    # Документация (Markdown)
│   ├── _likec4/            # Исходники LikeC4 диаграмм
│   ├── _macros/            # Макросы для MkDocs
│   ├── architecture/       # Архитектурная документация
│   └── guides/             # Руководства
├── scripts/                 # Скрипты для разработки
│   ├── serve-docs.sh      # Запуск локального сервера
│   └── build-likec4.sh    # Сборка LikeC4 диаграмм
├── mkdocs.yml              # Конфигурация MkDocs
└── .github/workflows/      # CI/CD для GitHub Pages
```

## Требования

- **Python 3.11+** для MkDocs
- **Node.js 20+** (опционально, для LikeC4 диаграмм)

## Полезные команды

```bash
# Запуск локального сервера (основная команда)
./scripts/serve-docs.sh

# Варианты использования
./scripts/serve-docs.sh                    # Стандартный запуск
./scripts/serve-docs.sh --skip-likec4       # Без сборки LikeC4
./scripts/serve-docs.sh --port 9000         # На другом порту

# Только сборка LikeC4 диаграмм
./scripts/build-likec4.sh
```

## Подробная документация

- [Как вносить изменения в документацию](docs/guides/contributing.md)
- [Локальная разработка](docs/guides/local-setup.md)
- [Стиль документации](docs/guides/style.md)

